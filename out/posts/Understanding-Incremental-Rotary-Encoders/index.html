<!DOCTYPE html><html lang="en" class="dark"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/my-next-blog/_next/static/css/1898c3acbbc06a56.css" data-precedence="next"/><link rel="stylesheet" href="/my-next-blog/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/my-next-blog/_next/static/chunks/webpack-a46db31cce063d95.js"/><script src="/my-next-blog/_next/static/chunks/4bd1b696-fecb3a0fa31c0729.js" async=""></script><script src="/my-next-blog/_next/static/chunks/517-6ce0b32f7203923b.js" async=""></script><script src="/my-next-blog/_next/static/chunks/main-app-4e1ffd7773e89442.js" async=""></script><script src="/my-next-blog/_next/static/chunks/173-824ba44f669ab771.js" async=""></script><script src="/my-next-blog/_next/static/chunks/88-5ddfc2d5ad6aae48.js" async=""></script><script src="/my-next-blog/_next/static/chunks/app/layout-11dacbdd38697ce4.js" async=""></script><script src="/my-next-blog/_next/static/chunks/92-3a4bbb0660b93f9c.js" async=""></script><script src="/my-next-blog/_next/static/chunks/app/posts/%5Bslug%5D/page-2594f1be67b20696.js" async=""></script><link rel="preload" href="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" as="script"/><title>Salameh</title><meta name="description" content="A personal blog built with Next.js"/><script src="/my-next-blog/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-gray-900 text-gray-100 min-h-screen"><header class="bg-gray-800 shadow-md"><nav class="container mx-auto px-4 py-4 flex justify-between items-center"><div class="flex items-center space-x-4"><a class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500" href="/my-next-blog/">Salameh</a><a target="_blank" class="text-gray-300 hover:text-white transition-colors" aria-label="GitHub" href="https://github.com/abda-s"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg></a><a target="_blank" class="text-gray-300 hover:text-white transition-colors" aria-label="LinkedIn" href="https://www.linkedin.com/in/abdullah-salameh/"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg></a></div><div class="hidden lg:flex space-x-6 items-center"><a class="text-gray-300 hover:text-white transition-colors" href="/my-next-blog/">Home</a><a class="text-gray-300 hover:text-white transition-colors" href="/my-next-blog/all-posts/">Posts</a><a class="text-gray-300 hover:text-white transition-colors" href="/my-next-blog/about/">About</a><a class="text-gray-300 hover:text-white transition-colors" href="/my-next-blog/contact/">Contact</a><form class="hidden lg:flex ml-6 items-center"><input type="text" placeholder="Search posts..." class="px-3 py-1 rounded-md bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-blue-500" value=""/><button type="submit" class="ml-2 text-gray-300 hover:text-white transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></button></form></div><div class="lg:hidden"><button class="text-white focus:outline-none"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div><div class="lg:hidden fixed top-0 right-0 h-full w-64 bg-gray-800 shadow-xl z-50 transition-transform duration-300 ease-in-out translate-x-full"><div class="p-4"><form class="mb-4"><input type="text" placeholder="Search posts..." class="w-full px-3 py-2 rounded-md bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-blue-500" value=""/><button type="submit" class="hidden">Submit</button> </form><a class="text-white text-lg block py-2 hover:text-blue-400 transition-colors" href="/my-next-blog/">Home</a><a class="text-white text-lg block py-2 hover:text-blue-400 transition-colors" href="/my-next-blog/all-posts/">Posts</a><a class="text-white text-lg block py-2 hover:text-blue-400 transition-colors" href="/my-next-blog/about/">About</a><a class="text-white text-lg block py-2 hover:text-blue-400 transition-colors" href="/my-next-blog/contact/">Contact</a></div></div></nav></header><main class="container mx-auto px-4 py-8"><article class="max-w-3xl mx-auto break-words hyphens-auto"><header class="mb-8"><h1 class="text-3xl md:text-4xl font-bold text-white mb-2">Understanding Incremental Rotary Encoders</h1><p class="text-gray-400">2025-03-29</p></header><div class="prose prose-lg dark:prose-invert prose-headings:text-white prose-a:text-blue-400 prose-strong:text-white prose-code:text-blue-300 prose-pre:bg-gray-800 prose-pre:border prose-pre:border-gray-700 max-w-none"></div><div class="mt-12 pt-6 border-t border-gray-700"><a class="text-blue-400 hover:text-blue-300 inline-flex items-center" href="/my-next-blog/"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>Back to all posts</a></div></article></main><footer class="bg-gray-800 text-gray-400 py-8"><div class="container mx-auto px-4 text-center"><p>© <!-- -->2025<!-- --> My Blog. All rights reserved.</p></div></footer><script src="/my-next-blog/_next/static/chunks/webpack-a46db31cce063d95.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[76074,[\"173\",\"static/chunks/173-824ba44f669ab771.js\",\"88\",\"static/chunks/88-5ddfc2d5ad6aae48.js\",\"177\",\"static/chunks/app/layout-11dacbdd38697ce4.js\"],\"default\"]\n3:I[15244,[],\"\"]\n4:I[43866,[],\"\"]\n6:I[86213,[],\"OutletBoundary\"]\n8:I[86213,[],\"MetadataBoundary\"]\na:I[86213,[],\"ViewportBoundary\"]\nc:I[34835,[],\"\"]\n:HL[\"/my-next-blog/_next/static/css/1898c3acbbc06a56.css\",\"style\"]\n:HL[\"/my-next-blog/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"xQYf-BIXXYv0bsNHN4kgJ\",\"p\":\"/my-next-blog\",\"c\":[\"\",\"posts\",\"Understanding-Incremental-Rotary-Encoders\",\"\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"Understanding-Incremental-Rotary-Encoders\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/my-next-blog/_next/static/css/1898c3acbbc06a56.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"dark\",\"children\":[\"$\",\"body\",null,{\"className\":\"bg-gray-900 text-gray-100 min-h-screen\",\"children\":[[\"$\",\"$L2\",null,{}],[\"$\",\"main\",null,{\"className\":\"container mx-auto px-4 py-8\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"bg-gray-800 text-gray-400 py-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 text-center\",\"children\":[\"$\",\"p\",null,{\"children\":[\"© \",2025,\" My Blog. All rights reserved.\"]}]}]}]]}]}]]}],{\"children\":[\"posts\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"Understanding-Incremental-Rotary-Encoders\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/my-next-blog/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L6\",null,{\"children\":\"$L7\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"X9cYPu-4HE-k6ahh1zj7m\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],null]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"Salameh\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"A personal blog built with Next.js\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script><script>self.__next_f.push([1,"d:I[53704,[\"173\",\"static/chunks/173-824ba44f669ab771.js\",\"92\",\"static/chunks/92-3a4bbb0660b93f9c.js\",\"858\",\"static/chunks/app/posts/%5Bslug%5D/page-2594f1be67b20696.js\"],\"\"]\ne:I[88722,[\"173\",\"static/chunks/173-824ba44f669ab771.js\",\"92\",\"static/chunks/92-3a4bbb0660b93f9c.js\",\"858\",\"static/chunks/app/posts/%5Bslug%5D/page-2594f1be67b20696.js\"],\"default\"]\n10:I[48173,[\"173\",\"static/chunks/173-824ba44f669ab771.js\",\"92\",\"static/chunks/92-3a4bbb0660b93f9c.js\",\"858\",\"static/chunks/app/posts/%5Bslug%5D/page-2594f1be67b20696.js\"],\"\"]\nf:T1ec5,"])</script><script>self.__next_f.push([1,"\u003cp\u003eA \u003cstrong\u003erotary encoder\u003c/strong\u003e is a device that converts the angular position of a shaft into analog or digital output signals. These encoders are commonly used in industrial automation, robotics, and consumer electronics.\u003c/p\u003e\n\u003ch2\u003eTypes of Rotary Encoders\u003c/h2\u003e\n\u003cp\u003eThere are two main types of rotary encoders:\u003c/p\u003e\n\u003ch3\u003eAbsolute Encoders\u003c/h3\u003e\n\u003cp\u003eAn \u003cstrong\u003eabsolute encoder\u003c/strong\u003e maintains position information even when power is removed. It provides the current angular position of the shaft at any given moment.\u003c/p\u003e\n\u003ch3\u003eIncremental Encoders\u003c/h3\u003e\n\u003cp\u003eAn \u003cstrong\u003eincremental encoder\u003c/strong\u003e, on the other hand, does not retain position information when powered off. It provides motion data based on changes from an initial reference point. To determine an absolute position, the system must first move to a known reference angle.\u003c/p\u003e\n\u003cp\u003eIn this article, we will focus on \u003cstrong\u003eincremental encoders\u003c/strong\u003e and provide a simple ESP32 code to interface with them.\u003c/p\u003e\n\u003ch2\u003eHow Incremental Encoders Work\u003c/h2\u003e\n\u003cp\u003eIncremental encoders have two main output signals:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eA (Channel A)\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eB (Channel B)\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThese signals indicate movement and direction when the shaft rotates. Some encoders also include a third signal, \u003cstrong\u003eZ\u003c/strong\u003e, which serves as a reference point for position calibration.\u003c/p\u003e\n\u003ch3\u003eSignal Representation\u003c/h3\u003e\n\u003cp\u003eHere is an image illustrating signals \u003cstrong\u003eA\u003c/strong\u003e, \u003cstrong\u003eB\u003c/strong\u003e, and \u003cstrong\u003eZ\u003c/strong\u003e:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/my-next-blog/images/moving_disc_with_slits-1771498052.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch2\u003eQuadrature Outputs\u003c/h2\u003e\n\u003cp\u003eIncremental encoders employ a \u003cstrong\u003equadrature encoder\u003c/strong\u003e to generate their \u003cem\u003eA\u003c/em\u003e and \u003cem\u003eB\u003c/em\u003e output signals. The pulses from these outputs are quadrature-encoded, meaning that \u003cem\u003eA\u003c/em\u003e and \u003cem\u003eB\u003c/em\u003e are phase-shifted by 90 degrees when the encoder moves at a constant speed.\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/my-next-blog/images/Quadrature_Diagram.psd.png\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003eAt any given moment, the phase difference between the \u003cem\u003eA\u003c/em\u003e and \u003cem\u003eB\u003c/em\u003e signals indicates the encoder\u0026#39;s rotation direction:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003eA phase difference of \u003cstrong\u003e+90°\u003c/strong\u003e corresponds to \u003cstrong\u003eclockwise rotation\u003c/strong\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003eA phase difference of \u003cstrong\u003e−90°\u003c/strong\u003e corresponds to \u003cstrong\u003ecounterclockwise rotation\u003c/strong\u003e.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/my-next-blog/images/quadrature-969270470.jpg\" alt=\"\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/my-next-blog/images/Incremental_directional_encoder.gif\" alt=\"\"\u003e\u003c/p\u003e\n\u003ch3\u003eQuadrature Encoding Table\u003c/h3\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eStep\u003c/th\u003e\n\u003cth\u003e\u003ccode\u003eoutputA\u003c/code\u003e\u003c/th\u003e\n\u003cth\u003e\u003ccode\u003eoutputB\u003c/code\u003e\u003c/th\u003e\n\u003cth\u003eRotation Direction\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003e1\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eStart Position\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e2\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eClockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e3\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eClockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e4\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eClockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e5\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eNext Step\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e6\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eCounterclockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e7\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eCounterclockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e8\u003c/td\u003e\n\u003ctd\u003eHIGH\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eCounterclockwise\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e9\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eLOW\u003c/td\u003e\n\u003ctd\u003eNext Step\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003ch2\u003eResolution of an Incremental Encoder\u003c/h2\u003e\n\u003cp\u003eThe \u003cstrong\u003eresolution\u003c/strong\u003e of an incremental encoder determines its precision. It is specified as:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003ePulses per Revolution (PPR)\u003c/strong\u003e for rotary encoders.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003ePulses per Unit Distance (e.g., mm)\u003c/strong\u003e for linear encoders.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eEach signal edge (rising and falling transitions of \u003cem\u003eA\u003c/em\u003e and \u003cem\u003eB\u003c/em\u003e) represents a detected position change. Since each full cycle has four edges (rising \u003cem\u003eA\u003c/em\u003e, rising \u003cem\u003eB\u003c/em\u003e, falling \u003cem\u003eA\u003c/em\u003e, falling \u003cem\u003eB\u003c/em\u003e), the measurement resolution is \u003cstrong\u003eone-fourth of a full \u003cem\u003eA\u003c/em\u003e or \u003cem\u003eB\u003c/em\u003e output cycle\u003c/strong\u003e.\u003c/p\u003e\n\u003cp\u003eFor example, a \u003cstrong\u003e1000 pulse-per-revolution (PPR) rotary encoder\u003c/strong\u003e has:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ePer-cycle measurement resolution = \u003cstrong\u003e360° / 1000 cycles = 0.36° per pulse\u003c/strong\u003e\u003c/li\u003e\n\u003cli\u003eEffective resolution = \u003cstrong\u003e0.36° / 4 = 0.09° per edge\u003c/strong\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eESP32 Code for Incremental Encoder\u003c/h2\u003e\n\u003cp\u003eBelow is a simple \u003cstrong\u003eESP32 Arduino\u003c/strong\u003e code to read an incremental rotary encoder:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-cpp\"\u003e#define outputA 17\n#define outputB 16\n\nvolatile int counter = 0;\nvolatile int aLastState;  \n\nvoid IRAM_ATTR handleEncoder() {\n  int aState = digitalRead(outputA);\n  if (aState != aLastState) {\n    if (digitalRead(outputB) != aState) {\n      counter++;\n    } else {\n      counter--;\n    }\n  }\n  aLastState = aState;\n}\n\nvoid setup() {\n  pinMode(outputA, INPUT);\n  pinMode(outputB, INPUT);\n  Serial.begin(9600);\n  aLastState = digitalRead(outputA);\n  attachInterrupt(digitalPinToInterrupt(outputA), handleEncoder, CHANGE);\n}\n\nvoid loop() {\n  static int lastCounter = 0;\n  if (lastCounter != counter) {\n    Serial.print(\u0026quot;Position: \u0026quot;);\n    Serial.println(counter);\n    lastCounter = counter;\n  }\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eWhy Use an Interrupt Instead of \u003ccode\u003edigitalRead\u003c/code\u003e in the Loop?\u003c/h3\u003e\n\u003cp\u003eUsing an \u003cstrong\u003einterrupt function\u003c/strong\u003e (\u003ccode\u003eattachInterrupt\u003c/code\u003e) allows the microcontroller to \u003cstrong\u003eimmediately detect\u003c/strong\u003e changes in the encoder signal without continuously checking in the \u003ccode\u003eloop()\u003c/code\u003e. If we used \u003ccode\u003edigitalRead\u003c/code\u003e in the loop, we might miss some pulses, especially if the encoder rotates quickly. Interrupts ensure \u003cstrong\u003ereal-time response\u003c/strong\u003e to changes in the encoder\u0026#39;s state, leading to more accurate readings.\u003c/p\u003e\n\u003ch3\u003eUnderstanding \u003ccode\u003evolatile\u003c/code\u003e and \u003ccode\u003eIRAM_ATTR\u003c/code\u003e\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e\u003ccode\u003evolatile\u003c/code\u003e\u003c/strong\u003e: This keyword tells the compiler that a variable can be modified by an interrupt, preventing optimization that might lead to incorrect behavior.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eIRAM_ATTR\u003c/code\u003e\u003c/strong\u003e: This attribute ensures that the interrupt handler function (\u003ccode\u003ehandleEncoder\u003c/code\u003e) is stored in \u003cstrong\u003eIRAM (Instruction RAM)\u003c/strong\u003e for faster execution, which is crucial for real-time processing.\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003eWhy Can\u0026#39;t We Use \u003ccode\u003eSerial.print\u003c/code\u003e in \u003ccode\u003ehandleEncoder\u003c/code\u003e?\u003c/h3\u003e\n\u003cp\u003eThe \u003ccode\u003ehandleEncoder\u003c/code\u003e function is an \u003cstrong\u003eInterrupt Service Routine (ISR)\u003c/strong\u003e, which should execute as quickly as possible. Using \u003ccode\u003eSerial.print\u003c/code\u003e inside an ISR can cause issues because:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cstrong\u003eSerial communication is slow\u003c/strong\u003e compared to ISR execution speed.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eSerial functions use interrupts internally\u003c/strong\u003e, which may conflict with the encoder ISR.\u003c/li\u003e\n\u003cli\u003e\u003cstrong\u003eDelays in ISR execution can cause missed pulses\u003c/strong\u003e, leading to inaccurate readings.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eConclusion\u003c/h2\u003e\n\u003cp\u003eIncremental rotary encoders are fundamental in position and motion sensing applications. Understanding how they generate quadrature signals allows precise control and tracking of rotary motion. With an ESP32 and a simple interrupt-driven approach, you can easily integrate an incremental encoder into your projects.\u003c/p\u003e\n\u003ch2\u003eReferences\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://howtomechatronics.com/tutorials/arduino/rotary-encoder-works-use-arduino/\"\u003ehttps://howtomechatronics.com/tutorials/arduino/rotary-encoder-works-use-arduino/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Rotary_encoder\"\u003ehttps://en.wikipedia.org/wiki/Rotary_encoder\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Incremental_encoder\"\u003ehttps://en.wikipedia.org/wiki/Incremental_encoder\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://esp32io.com/tutorials/esp32-rotary-encoder\"\u003ehttps://esp32io.com/tutorials/esp32-rotary-encoder\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"$Ld\",null,{\"id\":\"MathJax-config\",\"dangerouslySetInnerHTML\":{\"__html\":\"\\n            window.MathJax = {\\n              tex: {\\n                inlineMath: [['$', '$']],\\n                displayMath: [['$$', '$$']],\\n                processEscapes: true\\n              },\\n              options: {\\n                ignoreHtmlClass: 'no-mathjax',\\n                processHtmlClass: 'mathjax'\\n              }\\n            };\\n          \"}}],[\"$\",\"$Ld\",null,{\"id\":\"MathJax-script\",\"async\":true,\"src\":\"https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js\"}],[\"$\",\"article\",null,{\"className\":\"max-w-3xl mx-auto break-words hyphens-auto\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl md:text-4xl font-bold text-white mb-2\",\"children\":\"Understanding Incremental Rotary Encoders\"}],[\"$\",\"p\",null,{\"className\":\"text-gray-400\",\"children\":\"2025-03-29\"}]]}],[\"$\",\"$Le\",null,{\"html\":\"$f\"}],[\"$\",\"div\",null,{\"className\":\"mt-12 pt-6 border-t border-gray-700\",\"children\":[\"$\",\"$L10\",null,{\"href\":\"/\",\"className\":\"text-blue-400 hover:text-blue-300 inline-flex items-center\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"className\":\"h-5 w-5 mr-2\",\"fill\":\"none\",\"viewBox\":\"0 0 24 24\",\"stroke\":\"currentColor\",\"children\":[\"$\",\"path\",null,{\"strokeLinecap\":\"round\",\"strokeLinejoin\":\"round\",\"strokeWidth\":2,\"d\":\"M10 19l-7-7m0 0l7-7m-7 7h18\"}]}],\"Back to all posts\"]}]}]]}]]\n"])</script></body></html>